"use strict";import{LocalStorage as r}from"../LocalStorage.js";import{Navigation as u}from"../Navigation.js";import{AppState as t}from"../AppState.js";import{PlaylistManager as l}from"../PlaylistManager.js";import{safeSendPlayCount as p}from"../playMusic.js";import{Sound as n}from"../Sound.js";import{Content as s}from"../UI/Content.js";import{Footer as e}from"../UI/Footer.js";import{EventHandlers as i}from"./EventHandlers.js";export class FooterEvents{static#e=!1;static init(){if(this.#e)throw new Error("\u3059\u3067\u306Binitialized!");this.#o(),this.#l(),this.#r(),this.#s(),this.#n(),this.#t(),this.#e=!0}static setupSeekBarUpdate(o){o.ontimeupdate=()=>{if(e.updateSeekBarAndCurrentTimeText(o.currentTime),u.setPositionState(o),t.loopMode==2&&o.duration-o.currentTime<.65){const a=l.getCurrentTrackTitle();a&&p(a)}}}static#t(){e.elements.musicTitle.addEventListener("click",()=>{s.scrollTo(l.currentTrackIndex)})}static#o(){e.elements.playButton.onclick=()=>i.togglePlayback(),e.elements.backButton.onclick=()=>i.handleBack(),e.elements.forwardButton.onclick=()=>i.handleForward()}static#l(){e.elements.seekBar.oninput=()=>{n.currentTime=+e.elements.seekBar.value}}static#r(){e.elements.volumeControl.oninput=o=>{r.volume=+o.target.value,n.setVolume(r.volume)}}static#s(){e.elements.loopButton.onclick=()=>{t.loopMode=(t.loopMode+1)%3,r.loopMode=t.loopMode,e.updateLoopButtonUI(t.loopMode),n.setLoop(t.loopMode===2)}}static#n(){e.elements.shuffleButton.onclick=()=>{t.shuffleMode=1-t.shuffleMode,r.shuffleMode=t.shuffleMode,e.updateShuffleButtonUI(t.shuffleMode),t.shuffleMode===1?l.shufflePlaylist({moveCurrentTrackToTop:!0}):l.setDefaultOrder(),s.renderPlaylist(l.playlist),s.updatePlayingClass(l.currentTrackIndex),s.scrollTo(l.currentTrackIndex)}}}
