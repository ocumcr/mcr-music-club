"use strict";import{LocalStorage as e}from"../LocalStorage.js";import{Navigation as a}from"../Navigation.js";import{PlaylistManager as l}from"../PlaylistManager.js";import{Sound as s}from"../Sound.js";import{Content as r}from"../UI/Content.js";import{Footer as t}from"../UI/Footer.js";import{EventHandlers as n}from"./EventHandlers.js";import{Survey as u}from"../Survey.js";export class FooterEvents{static#e=!1;static init(){if(this.#e)throw new Error("\u3059\u3067\u306Binitialized!");this.#o(),this.#l(),this.#r(),this.#s(),this.#n(),this.#t(),this.#e=!0}static setupSeekBarUpdate(o){o.ontimeupdate=()=>{if(t.updateSeekBarAndCurrentTimeText(o.currentTime),a.setPositionState(o),e.loopMode==2&&o.duration-o.currentTime<.65){const i=l.getCurrentTrackTitle();i&&u.safeSendPlayCount(i)}}}static#t(){t.elements.musicTitle.addEventListener("click",()=>{r.scrollTo(l.currentTrackIndex-1)})}static#o(){t.elements.playButton.onclick=()=>n.togglePlayback(),t.elements.backButton.onclick=()=>n.handleBack(),t.elements.forwardButton.onclick=()=>n.handleForward()}static#l(){t.elements.seekBar.oninput=()=>{s.currentTime=+t.elements.seekBar.value}}static#r(){t.elements.volumeControl.oninput=o=>{e.volume=+o.target.value,s.setVolume(e.volume/100)}}static#s(){t.elements.loopButton.onclick=()=>{e.loopMode=(e.loopMode+1)%3,e.loopMode=e.loopMode,t.updateLoopButtonUI(e.loopMode),s.setLoop(e.loopMode===2)}}static#n(){t.elements.shuffleButton.onclick=()=>{e.shuffleMode=1-e.shuffleMode,e.shuffleMode=e.shuffleMode,t.updateShuffleButtonUI(e.shuffleMode),e.shuffleMode===1?l.shufflePlaylist({moveCurrentTrackToTop:!0}):l.setDefaultOrder(),r.renderPlaylist(l.playlist),r.updatePlayingClass(l.currentTrackIndex),r.scrollTo(l.currentTrackIndex-1)}}}
